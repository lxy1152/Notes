---
title: 1802.有界数组中指定下标处的最大值
katex: true
categories:
  - LeetCode
  - 题解
  - 1801-1900
date: 2021-03-22 13:12:49
description: 
cover:
tags:
  - 数组
  - 周赛
---

## 题目信息

### 题目描述

给你三个正整数 `n`，`index` 和 `maxSum` ，你需要构造一个同时满足下述所有条件的数组 `nums`（下标从 `0` 开始计数）：

- `nums.length == n`
- `nums[i]` 是正整数，其中 $0 \le i < n$
- $\text{abs}(nums[i] - nums[i+1]) \le 1$，其中：$0 \le i < n-1$
- `nums` 中所有元素之和不超过 `maxSum`
- `nums[index]` 的值被最大化

返回你所构造的数组中的 `nums[index]` 。

{% note info flat %}

{% endnote %}

{% note warning flat %}
注意：$1 \le n \le maxSum \le 10^9$，$0 \le index < n $
{% endnote %}

### 示例输出

{% tabs sample %}
<!-- tab 示例输出1 -->
输入： `n = 4, index = 2, maxSum = 6`
输出： `2`
<!-- endtab -->

<!-- tab 示例输出2 -->
输入： `n = 6, index = 1, maxSum = 10`
输出： `3`
<!-- endtab -->
{% endtabs %}

## 解题思路

由题意，最后得到的数组应该像一个山峰一样，`index` 的位置是最高峰。同时由于相邻双数的差的绝对值不超过 `1`，所以山的坡度还不能太大。

不妨假设有一面墙，墙上的砖的高度初始都是1，我们需要从 `index` 的位置开始不断的往上加砖，看看最高能加多少块。排除这些已经使用的砖，剩下的可用的砖的数量（`rest`）就是 `maxSum - n` 个。
由于坡度的限制，不能只在 `index` 的位置一直加砖，还需要在它两旁也码上砖。但多了两个位置加砖会导致下一次需要在 `5` 个位置上加砖（不考虑边界情况），再下次是 `7` 个位置，再再下次是...。
这就导致我们需要维护一个区间，这个区间代表了需要加砖的所有位置，每一次的区间扩展至多是当前区间长度 $ + 2$（因为有边界）。
因为每次扩展时在每个位置只加一块砖，所以：
1. 如果区间扩展前的剩余可用砖的数量大于等于扩展后的区间长度就直接在每个位置上分配一块砖，剩余数量等于 `rest - length`（`length` 代表区间长度）
2. 如果砖块数量不够分了，那也就没必要在扩展区间了，直接把剩余的砖块均分一下就完事了

最后 `index` 的位置的砖头数量就是答案。

## 代码实现

```java
public static int maxValue(int n, int index, int maxSum) {
    int left = index;
    int right = index;
    int result = 1;

    // 全部给1, 看一下剩下多少可以用来填充
    int rest = maxSum - n;

    // 左右边界不断扩展
    while (left > 0 || right < n - 1) {
        // 当前区间的长度
        int len = right - left + 1;
        // 对区间内的所有位置都加1
        if (rest >= len) {
            rest -= len;
            result++;
            // 区间扩展
            left = Math.max(left - 1, 0);
            right = Math.min(n - 1, right + 1);
        } else {
            break;
        }
    }
    // 剩下的值均分
    result += rest / n;
    return result;
}
```

{% note success flat %}
执行用时：7 ms, 在所有 Java 提交中击败了100.00%的用户
内存消耗：34.9 MB, 在所有 Java 提交中击败了100.00%的用户
{% endnote %}

---
